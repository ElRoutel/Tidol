<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TIDOL - Perfil</title>

<!-- Estilos base -->
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="css/sidebar.css">
<link rel="stylesheet" href="css/responsive.css">

<!-- Script principal (opcional para sidebar toggle) -->
<script type="module" src="/js/main.js" defer></script>
</head>
<body>

<!-- ===================== SIDEBAR ===================== -->
<aside class="sidebar">
<div class="profile">
  <a href="/protected/perfil_dev.html">
    <img src="/default_cover.png" alt="Foto de perfil" class="profile-pic">
    <span id="user-name">Usuario</span>
  </a>
</div>


    <ul class="sidebar-menu">
        <li><button onclick="location.href='/index_dev.html'">Inicio</button></li>
        <li><button onclick="location.href='subir_dev.html'">Subir Música</button></li>
        <li><button onclick="location.href='buscar_dev.html'">Buscar</button></li>
        <li><button onclick="location.href='albumes_dev.html'">Álbumes</button></li>
        <li><button onclick="location.href='artistas_dev.html'">Artistas</button></li>
        <li><button id="logout-btn">Salir</button></li>
    </ul>
</aside>

<!-- ===================== CONTENIDO PRINCIPAL ===================== -->
<main class="main-content">
  <header class="main-header">
  <a href="/index_dev.html" class="logo">Tidol Developer</a>
</header>

    <h2>Mi Perfil</h2>
  </header>

  <section class="panel">
    <h3>Foto de Perfil</h3>
    <div class="profile-edit">
      <img src="/default_cover.png" alt="Preview" class="profile-pic" id="profilePreview">
      <input type="file" id="profileInput" accept="image/*">
    </div>
  </section>

  <section class="panel">
    <h3>Información</h3>
    <label for="username">Nombre de usuario:</label>
    <input type="text" id="username" value="Usuario">
    
    <label for="bio">Bio / Descripción:</label>
    <textarea id="bio" placeholder="Escribe algo sobre ti..."></textarea>
    
    <button id="save-profile">Guardar Cambios</button>
  </section>
</main>

<!-- ===================== FOOTER / PLAYER (oculto) ===================== -->
<footer class="player-container" style="display:none;"></footer>

<!-- ===================== SCRIPT ===================== -->
<script>
  // Preview de imagen antes de subir
  const profileInput = document.getElementById('profileInput');
  const profilePreview = document.getElementById('profilePreview');
  const userNameSpan = document.getElementById('user-name');

  profileInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = () => {
      profilePreview.src = reader.result;
      document.querySelector('.sidebar .profile-pic').src = reader.result;
    };
    reader.readAsDataURL(file);
  });

  // Guardar cambios (simulación)
  const saveBtn = document.getElementById('save-profile');
  saveBtn.addEventListener('click', () => {
    const username = document.getElementById('username').value;
    const bio = document.getElementById('bio').value;
    if(username) userNameSpan.textContent = username;
    alert('Cambios guardados (simulación)');
    // Aquí podrías hacer fetch POST a tu backend para guardar datos reales
  });
</script>

</body>
</html>
